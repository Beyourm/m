<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ูุธุงู ูุญุงุณุจุฉ ูุชูุฏู (ุนููุงุกุ ุถุฑูุจุฉุ ุขุฌู)</title>
<link rel="stylesheet" href="style.css"> 
</head>
<body>

<div class="container">
    <h1>ูุธุงู ูุญุงุณุจุฉ ูุชูุฏู (ุงููุฎุฒููุ ุงูููุงุชูุฑุ ุงูุถุฑูุจุฉุ ุงูุนููุงุก)</h1>

    <div class="tab-header">
        <button class="tab-button active" onclick="openTab('inventory')">๐ฆ ุงููุฎุฒูู</button>
        <button class="tab-button" onclick="openTab('sales')">๐ฐ ุงููุจูุนุงุช ูุงูููุงุชูุฑ</button>
        <button class="tab-button" onclick="openTab('physicalCount')">๐ ุฌุฑุฏ ุงููุฎุฒูู</button> <button class="tab-button" onclick="openTab('customers')">๐ฅ ุงูุนููุงุก</button>
        <button class="tab-button" onclick="openTab('reports')">๐ ุงูุชูุงุฑูุฑ ุงููุงููุฉ</button>
    </div>

    <div id="inventory" class="tab-content active">
        <h2>ุฅุถุงูุฉ / ุชุนุฏูู ุงูุฃุตูุงู</h2>
        <div class="form-grid">
            <input type="text" id="itemName" placeholder="ุงุณู ุงูุตูู">
            <input type="number" id="itemPriceSale" placeholder="ุณุนุฑ ุงูุจูุน">
            <input type="number" id="itemPricePurchase" placeholder="ุณุนุฑ ุงูุดุฑุงุก">
            <input type="number" id="itemQty" placeholder="ุงููููุฉ">
            <select id="itemUnit" onchange="togglePackageField()">
                <option value="ุญุจุฉ">ุญุจุฉ / ูุทุนุฉ</option>
                <option value="ูุฑุชูู">ูุฑุชูู</option>
                <option value="ุจุงูุช">ุจุงูุช (ูุญุฏุฉ ุฑุฆูุณูุฉ)</option>
                <option value="ุญุจุฉ">ุญุจุฉ</option>
           
            </select>
            <div id="packageFieldContainer" style="display: none; grid-column: 1 / -1; border: 1px dashed #ced4da; padding: 10px; border-radius: 6px;">
                 <label style="font-weight: bold; color: #007bff; display: block; margin-bottom: 5px;">ุนูุงูู ุงูุชุญููู (ุฅุฐุง ูุงูุช ุงููุญุฏุฉ ูุฑุชูู)</label>
                 <div class="form-grid-conversion">
                    <input type="number" id="packPerCarton" placeholder="ุนุฏุฏ ุงูุจุงูุชุงุช ูู ุงููุฑุชูู" min="1">
                    <input type="number" id="unitsPerPack" placeholder="ุนุฏุฏ ุงูุญุจุงุช ูู ุงูุจุงูุช" min="1">
                </div>
             </div>
            <button onclick="addItem()">ุฅุถุงูุฉ ุงูุตูู ูููุฎุฒูู</button>
        </div>

        <h2 style="margin-top: 30px;">ูุงุฆูุฉ ุงูุฃุตูุงู ุงูุญุงููุฉ</h2>
        <div class="search-export-bar">
            <input type="text" id="inventorySearch" placeholder="ุจุญุซ ุจุงุณู/ุณุนุฑ/ูุญุฏุฉ" oninput="renderTable()">
            <button onclick="exportInventoryToCSV()" class="action-btn export-btn">ุชุตุฏูุฑ ุงููุฎุฒูู โฌ๏ธ</button>
        </div>
        <table id="itemsTable">
            <thead>
                <tr>
                    <th>ุงูุงุณู</th>
                    <th>ุณุนุฑ ุงูุจูุน</th>
                    <th>ุณุนุฑ ุงูุดุฑุงุก</th>
                    <th>ุงููููุฉ / ุงูุนุจูุฉ</th> <th>ุฅุฌูุงูู ุงููููุฉ (ุดุฑุงุก)</th>
                    <th>ุชุงุฑูุฎ ุงูุชุนุฏูู</th>
                    <th>ุฅุฌุฑุงุก</th>
                </tr>
            </thead>
            <tbody></tbody>
            <tfoot></tfoot>
        </table>
    </div>

    <div id="sales" class="tab-content">
        <h2>ุฅูุดุงุก ูุงุชูุฑุฉ ูุจูุนุงุช ุฌุฏูุฏุฉ</h2>
        <div class="invoice-details form-grid-2-cols">
            <select id="clientNameSelect" onchange="checkClientStatus()">
                <option value="ููุฏ">ุนููู ููุฏู</option>
                </select>
            <input type="date" id="invoiceDate" placeholder="ุชุงุฑูุฎ ุงููุงุชูุฑุฉ">
            <select id="paymentStatus" onchange="checkClientStatus()">
                <option value="ููุฏ">ุญุงูุฉ ุงูุฏูุน: ููุฏุงู</option>
                <option value="ุขุฌู">ุญุงูุฉ ุงูุฏูุน: ุขุฌู</option>
            </select>
            <input type="number" id="vatRate" placeholder="ูุณุจุฉ ุงูุถุฑูุจุฉ (%)" value="0" min="0" oninput="renderCurrentInvoiceItemsTable()">
        </div>

        <div class="invoice-item-selection form-grid" style="grid-template-columns: 2fr 1fr 1fr 1fr;">
            <select id="invoiceItemSelect">
                <option value="">ุงุฎุชุฑ ุตูู ููุจูุน</option>
            </select>
             <select id="invoiceSellUnit" style="min-width: 60px;">
                <option value="">ุงููุญุฏุฉ</option>
            </select>
            <input type="number" id="invoiceItemQty" placeholder="ุงููููุฉ" min="1">
            <button onclick="addItemToInvoice()" style="margin: 0;">ุฃุถู ุฅูู ุงููุงุชูุฑุฉ</button>
        </div>
        
        <table id="currentInvoiceTable">
            <thead>
                <tr><th>ุงูุตูู</th><th>ุณุนุฑ ุงููุญุฏุฉ</th><th>ุงููููุฉ</th><th>ุงูุฅุฌูุงูู ุงููุฑุนู</th><th>ุญุฐู</th></tr>
            </thead>
            <tbody></tbody>
            <tfoot id="currentInvoiceTotal"></tfoot>
        </table>

        <div class="search-export-bar" style="margin-top: 20px;">
            <input type="number" id="invoiceDiscount" placeholder="ุงูุฎุตู (%)" value="0" min="0" max="100" oninput="renderCurrentInvoiceItemsTable()" style="min-width: 100px;">
            <button onclick="finalizeInvoice()" class="save-btn" style="flex-grow: 1;">ุฅุชูุงู ูุฅุตุฏุงุฑ ุงููุงุชูุฑุฉ</button>
        </div>

        <h2 style="margin-top: 30px;">ูุงุฆูุฉ ุงูููุงุชูุฑ ุงูุณุงุจูุฉ</h2>
        <div class="search-export-bar">
            <input type="text" id="invoicesSearch" placeholder="ุจุญุซ ุจุงูุฑูู/ุงูุนููู/ุงูุฅุฌูุงูู" oninput="renderInvoicesList()">
            <button onclick="exportInvoicesToCSV()" class="action-btn export-btn">ุชุตุฏูุฑ ุงูููุงุชูุฑ โฌ๏ธ</button>
        </div>
        <table id="invoicesListTable">
            <thead>
                <tr><th>ุฑูู ุงููุงุชูุฑุฉ</th><th>ุงูุชุงุฑูุฎ</th><th>ุงูุนููู</th><th>ุงูุญุงูุฉ</th><th>ุงูุฅุฌูุงูู ุงูููุงุฆู</th><th>ุนุฑุถ</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <div id="physicalCount" class="tab-content">
        <h2>๐ ุฌุฑุฏ ููุทุงุจูุฉ ุงููุฎุฒูู ุงููุนูู</h2>
        <p class="guide-text" style="color: #6c757d; border: 1px dashed #ced4da; padding: 10px; border-radius: 6px; margin-bottom: 20px;">
            ูู ุจุฅุฏุฎุงู ุงููููุฉ **ุงููุนููุฉ** ููู ุตูู. ุณูุธูุฑ ูู ุงููุฑู ุจูู ุงููููุฉ ุงููุณุฌูุฉ ูู ุงููุธุงู ูุงููููุฉ ุงููุนููุฉ. ุงุถุบุท ุนูู "ุชุญุฏูุซ ุงููุฎุฒูู" ูุงุนุชูุงุฏ ุงูุฌุฑุฏ.
        </p>
        
        <div class="search-export-bar" style="margin-bottom: 15px;">
            <input type="text" id="countSearch" placeholder="ุจุญุซ ุจุงุณู ุงูุตูู..." oninput="renderPhysicalCountTable()">
            <button onclick="updateInventoryAfterCount()" class="save-btn" style="flex-grow: 1; background-color: #ff8c00;">ุชุญุฏูุซ ุงููุฎุฒูู ุญุณุจ ุงูุฌุฑุฏ</button>
        </div>

        <table id="physicalCountTable">
            <thead>
                <tr>
                    <th>ุงุณู ุงูุตูู</th>
                    <th>ูุญุฏุฉ ุงููุฎุฒูู</th>
                    <th>ุงููููุฉ ุงููุณุฌูุฉ (ุงููุธุงู)</th>
                    <th>ุงููููุฉ ุงููุนููุฉ (ุฌุฑุฏ)</th>
                    <th>ุงููุฑู (ูุงุฆุถ / ุนุฌุฒ)</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
    <div id="customers" class="tab-content">
        <h2>ุฅุถุงูุฉ ุนููู ุฌุฏูุฏ</h2>
        <div class="form-grid">
            <input type="text" id="customerName" placeholder="ุงุณู ุงูุนููู ุงููุงูู">
            <input type="text" id="customerPhone" placeholder="ุฑูู ุงููุงุชู (ุงุฎุชูุงุฑู)">
            <input type="text" id="customerAddress" placeholder="ุงูุนููุงู (ุงุฎุชูุงุฑู)">
            <button onclick="addCustomer()" style="grid-column: span 3;">ุฅุถุงูุฉ ุนููู</button>
        </div>

        <h2 style="margin-top: 30px;">ูุงุฆูุฉ ุงูุนููุงุก ุงููุณุฌููู</h2>
        <table id="customersTable">
            <thead>
                <tr><th>ุงูุงุณู</th><th>ุงููุงุชู</th><th>ุงูุนููุงู</th><th>ุชุงุฑูุฎ ุงูุฅุถุงูุฉ</th><th>ุฅุฌุฑุงุก</th></tr>
            </thead>
            <tbody>
                </tbody>
        </table>
    </div>

    <div id="reports" class="tab-content">
        <h2>๐ ุชูุงุฑูุฑ ุงูุฃุฏุงุก ูุงูุฃุฑุจุงุญ</h2>
        <div class="form-grid-2-cols" style="margin-bottom: 25px;">
            <label>ูู ุชุงุฑูุฎ:
                <input type="date" id="reportFromDate" onchange="renderReports()">
            </label>
            <label>ุฅูู ุชุงุฑูุฎ:
                <input type="date" id="reportToDate" onchange="renderReports()">
            </label>
        </div>

        <table id="financialReportsTable">
            <thead>
                <tr><th>ุงููุคุดุฑ ุงููุงูู</th><th>ุงููููุฉ ุงูุฅุฌูุงููุฉ</th></tr>
            </thead>
            <tbody>
                <tr><td>ุฅุฌูุงูู ุงูุฅูุฑุงุฏุงุช (ูุจู ุงูุถุฑูุจุฉ)</td><td id="totalRevenueBeforeTax">0.00</td></tr>
                <tr><td>ุฅุฌูุงูู ุงูุถุฑูุจุฉ ุงููุญุตูุฉ (VAT)</td><td id="totalVAT">0.00</td></tr>
                <tr><td>ุฅุฌูุงูู ุงูุฎุตููุงุช ุงูููููุญุฉ</td><td id="totalDiscounts">0.00</td></tr>
                <tr><td>ุฅุฌูุงูู ุชูููุฉ ุงูุจุถุงุนุฉ ุงููุจุงุนุฉ (COGS)</td><td id="totalCogs">0.00</td></tr>
                <tr style="font-weight: bold;">
                    <td>ุตุงูู ุงูุฑุจุญ ุงูุฅุฌูุงูู</td>
                    <td id="netProfit">0.00</td>
                </tr>
            </tbody>
        </table>

        <h3 style="margin-top: 25px;">ููุฎุต ุงููุจูุนุงุช ุญุณุจ ุงูููู</h3>
        <table id="dailySalesTable">
            <thead>
                <tr><th>ุงูุชุงุฑูุฎ</th><th>ุฅุฌูุงูู ุงููุจูุนุงุช (ุดุงูู ุงูุถุฑูุจุฉ)</th><th>ุตุงูู ุงูุฑุจุญ ุงููููู</th></tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</div>

<script src="script.js"></script> 

</body>
</html>
